<!DOCTYPE html>
<html>
<head>
	<title>Hello, World! A-Frame VR World!</title>
</head>
	<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
	<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.0/dist/aframe-extras.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		var socket = io();
			function test() {
				socket.emit('personalTest','this is a test')
			}

			function createBox() {
				socket.emit('newShape',{geometry: "primitive: sphere; radius: 1000;",
    	position:"-10000 1200 -3000",
    	material:"color:#ff0; metalness:0.0; roughness:1.0;",
    	message:"new Object"})
			}

			function goToAr2() {
				socket.emit("ar2", "This is ar2")
			}

			socket.on('toVRDrawing', function(data){
				let entity = document.createElement('a-entity')
				let newPath = dummy(data)
				console.log('this is your path',newPath)
				entity.setAttribute("tube", {"path": '0 1 1, 1 2 3,'})
				document.querySelector('a-scene').appendChild(entity)
			})

			function dummy (arr) {
				let results = ''
				arr.forEach(function(element) {
					results = results + element.x + ' ' + element.y + ' ' + '0, '
				})
				return results
			}


	</script>
	<style type="text/css">
		.aframebox {
			height: 500px;
			width: 500px;
			}
	</style>
<body>
	<a-scene class="aframebox" embedded>
		<a-box position="0 2 0" width="1" height="1" depth="1" color="blue"></a-box>
		<a-tube path="5 0 5, 5 0 -5, -5 0 -5" radius="0.5" material="color: red"></a-tube>
	</a-scene>
	<a-entity position="0 -1 0">
  	<a-camera></a-camera>
	</a-entity>
	<button type="button" onclick="test()">Howdy</button>
	<button type="button" onclick="createBox()">Create a box</button>
	<button type="button" onclick="goToAr2()">Ar2</button>
</body>
</html>