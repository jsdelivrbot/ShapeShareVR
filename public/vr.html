<!DOCTYPE html>
<html>
<head>
	<title>Hello, World! A-Frame VR World!</title>
</head>
	<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
	<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.0/dist/aframe-extras.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		var socket = io();
			function test() {
				socket.emit('personalTest','this is a test')
			}

			function createBox() {
				socket.emit('newShape',{geometry: "primitive: sphere; radius: 1000;",
    	position:"-10000 1200 -3000",
    	material:"color:#ff0; metalness:0.0; roughness:1.0;",
    	message:"new Object"})
			}

			function goToAr2() {
				socket.emit("ar2", "This is ar2")
			}

			socket.on('toVRDrawing', function(data){
				let entity = document.createElement('a-entity')
				let newPath = dummy(data)
				console.log('this is your path',newPath)
				console.log( typeof newPath)
				console.log(newPath)
				entity.setAttribute("tube", {"path": '13.9 0 34.3,19.4 0 14.4,19.5 0 14.1,20.15 0 12.9,20.2 0 12.8,20.4 0 12.55,20.45 0 12.4,20.55 0 12.2,20.7 0 12,20.85 0 11.85,21 0 11.7,21.15 0 11.6,21.2 0 11.4,21.45 0 11.25,21.55 0 11.15,21.7 0 11.05,21.9 0 10.85,22.05 0 10.75,22.2 0 10.65,22.4 0 10.55,22.55 0 10.5,22.8 0 10.4,22.95 0 10.2,23.2 0 10,23.35 0 9.75,23.55 0 9.6,23.7 0 9.5,23.7 0 9.5,24.15 0 9.2,24.4 0 9.15,24.65 0 9.1,24.65 0 9.1,25.25 0 9.1,25.25 0 9.1,25.6 0 9.3,25.95 0 9.55,26.25 0 9.7,26.55 0 9.9,27.4 0 10.7,27.75 0 11.25,27.75 0 11.25,28.1 0 11.75,28.35 0 12.35,28.5 0 12.9,28.65 0 13.5,28.75 0 14.05,28.8 0 14.7,28.75 0 15.3,28.6 0 15.9,28.45 0 16.5,28.15 0 16.9,27.85 0 17.35,27.45 0 17.85,27 0 18.25,26.6 0 18.65,26.2 0 19.25,25.8 0 19.7,25.3 0 20,24.85 0 20.3,24.45 0 20.45,23.9 0 20.5,23.35 0 20.35,22.8 0 20.25,22.2 0 20,21.75 0 19.65,21.25 0 19.45,20.7 0 19.15,20.25 0 18.85,19.85 0 18.55,19.45 0 18.25,19.2 0 17.9,19 0 17.5,18.85 0 17.15,18.85 0 16.8,18.85 0 16.45,18.9 0 16.1,19 0 15.7,19.05 0 15.3,19.25 0 15,19.35 0 14.75,19.4 0 14.45,19.5 0 14.1,19.75 0 13.9,19.85 0 13.6,19.9 0 13.4,20.15 0 13.25,20.2 0 13.05,20.35 0 13,20.4 0 12.85,20.5 0 12.8,20.6 0 12.85,20.75 0 12.7,20.85 0 12.7,20.9 0 12.7,20.95 0 12.65,21 0 12.5,21 0 12.5,21 0 12.55,21 0 12.5,21 0 12.5,20.95 0 12.6,21 0 12.5,20.9 0 12.5,20.95 0 12.55,20.9 0 12.55,20.9 0 12.45,20.85 0 12.5,20.8 0 12.65,20.55 0 12.7,20.6 0 12.7,20.55 0 12.85,20.55 0 12.85,20.55 0 12.8,20.55 0 12.9,20.45 0 13.15,20.35 0 13.25,20.25 0 13.45,20.2 0 13.65,20.2 0 13.9,20.2 0 14.35,20.1 0 14.75,23.1 0 21.85,'})
				document.querySelector('a-scene').appendChild(entity)
			})

			function dummy (arr) {
				let results = ''
				arr.forEach(function(element) {
					results = results + element.x/10 + ' ' + "0" + ' ' + element.y/10 + ','
				})
				return results
			}


	</script>
	<style type="text/css">
		.aframebox {
			height: 500px;
			width: 500px;
			}
	</style>
<body>
	<a-scene class="aframebox" embedded>
		<a-box position="0 2 0" width="1" height="1" depth="1" color="blue"></a-box>
		<a-tube path="5 0 5, 5 0 -5, -5 0 -5" radius="0.5" material="color: red"></a-tube>
	</a-scene>
	<a-entity position="0 -1 0">
  	<a-camera></a-camera>
	</a-entity>
	<button type="button" onclick="test()">Howdy</button>
	<button type="button" onclick="createBox()">Create a box</button>
	<button type="button" onclick="goToAr2()">Ar2</button>
</body>
</html>